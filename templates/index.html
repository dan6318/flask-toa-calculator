<!-- templates/index.html -->
<!doctype html>
<html>
<head>
  <meta charset="utf-8"/>
  <title>TOA Loot Calculator (Flask)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 750px; margin: 2rem auto; padding: 0 1rem; }
    label { display:block; margin-top:.75rem }
    input { width:100%; padding:.5rem }
    button { margin-top:1rem; padding:.6rem 1rem }
    pre { background:#f6f6f6; padding:1rem; border-radius:8px; overflow:auto }
  </style>
</head>
<body>
  <h1>OSRS ToA - Purple & Unique Odds</h1>
  <label>Raid level (invocations)<input id="raid_level" type="number" value="300" min="0" max="1000"></label>
  <label>Team size (1â€“8)<input id="team_size" type="number" value="1" min="1" max="8"></label>
  <label>Personal points<input id="personal_points" type="number" value="20000" min="0"></label>
  <label>Party points (optional)<input id="party_points" type="number" placeholder=""></label>
  <button id="calc">Calculate</button>

  <h2>Result</h2>
  <pre id="out">{}</pre>

  <script>
    document.getElementById('calc').onclick = async () => {
      const q = new URLSearchParams({
        raid_level: document.getElementById('raid_level').value,
        team_size: document.getElementById('team_size').value,
        personal_points: document.getElementById('personal_points').value,
        party_points: document.getElementById('party_points').value
      });
      const res = await fetch('/api/calc?' + q.toString());
      const data = await res.json();
      document.getElementById('out').textContent = JSON.stringify(data, null, 2);
    };
  </script>
</body>
</html>
